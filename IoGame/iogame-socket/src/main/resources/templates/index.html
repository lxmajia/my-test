<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>websocket.js</title>
</head>
<body>
<form id="from">
    账号:<input type="text" name="accountName" value="liaoxiang"> <br>
    密码:<input type="text" name="password" value="123456"> <br>
    <input type="button" value="登录" id="btn">
</form>


<div id="app">ioGamewebsocket.js</div>
<div id="input">
    <h2>Input</h2>
    Cmd:<input type="number" id="cmdCode" name="cmdCode" value="1"> <br>
    SubCmd:<input type="number" id="subCmdCode" name="subCmdCode" value="1"> <br>
    <textarea id="inputText" style="margin-top:20px;border: 1px #ddd solid;
   height: 150px;width: 830px; overflow-y: auto;"></textarea>
    <input type="button" value="发送" id="sendBtn">
</div>

<h2>Output</h2>
<div id="output" style="margin-top:20px;border: 1px #ddd solid; height: 260px; overflow-y: auto;">
</div>

<script type="text/javascript" th:src="@{/jquery-1.11.3.min.js}"></script>
<script type="text/javascript" th:src="@{/day.min.js}"></script>
<script type="text/javascript" th:src="@{/websocket.js}"></script>
<script>
    $("#btn").click(function () {
        $.ajax({
            async: false,  //异步
            url: "/auth/loginAjax", //地址
            type: "post",  //请求方式
            dataType: "json",  // 返回类型
            data: $("#from").serialize(),//直接序列化form表单
            success: function (data) {
                console.log(data) //后台返回结果
                if (data.code === 0) {
                    loginSuccess(data.body.token, data.body.userId);
                } else {
                    alert(data.message);
                }
            }
        })
    })

    $("#sendBtn").click(function () {
        var cmdCode = document.getElementById("cmdCode").value;
        var subCmdCode = document.getElementById("subCmdCode").value;
        var inputText = document.getElementById("inputText").value;

        console.log("cmd:" + cmdCode + "  sunCmd:" + subCmdCode + "   data:" + inputText)
        if (inputText === undefined || inputText === "") {
            alert("内容为空");
        } else {
            sendMsgByInput(cmdCode,subCmdCode,inputText);
        }
    })
</script>
</body>
</html>